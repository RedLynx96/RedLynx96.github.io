<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendario de Adviento</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: url('images/base.jpg') no-repeat center center fixed;
            background-size: cover;
            color: white;
            overflow: hidden;
        }

        h1 {
            text-align: center;
            margin-top: 20px;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px #000;
        }

        .container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            justify-content: center;
            margin: 0 auto;
            max-width: 300px;
            padding: 5px;
        }

        .day {
            width: 60px;
            height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 10px;
            background-color: #ccc;
            text-align: center;
        }

        .day.unlocked {
            border: 5px solid #6ad16d; /* Verde para d√≠as pasados */
            cursor: pointer;
        }

        .day.locked {
            border: 5px solid #999; /* Gris para d√≠as futuros */
            cursor: not-allowed;
            filter: grayscale(100%);
        }

        .day.today {
            border: 5px solid #ff6666; /* Rojo para el d√≠a actual */
            cursor: pointer;
        }

        .modal {
            display: none; /* Usamos flexbox */
            flex-direction: column; /* Alineamos el contenido en columna */
            justify-content: center; /* Centra verticalmente */
            align-items: center; /* Centra horizontalmente */
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #fff;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 10;
            border-radius: 10px;
            color: black;
            max-width: 90%; /* Evita que el modal sea m√°s grande que la ventana */
            max-height: 90%; /* Limita la altura m√°xima */
            overflow: auto; /* Habilita scroll si el contenido es m√°s grande */
        }

        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 9;
        }

        .close-btn {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #ff6666;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        /* Snowflake Animation */
        .snowflake {
            position: fixed;
            top: -10px;
            width: 10px;
            height: 10px;
            background: white;
            opacity: 0.8;
            border-radius: 50%;
            pointer-events: none;
            animation: fall 10s linear infinite;
        }

        @keyframes fall {
            0% {
                transform: translateY(0) translateX(0);
                opacity: 0.8;
            }
            100% {
                transform: translateY(100vh) translateX(50px);
                opacity: 0.2;
            }
        }

        .audio-controls {
            margin: 20px auto 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .play-button {
            padding: 10px 20px;
            background-color: #ff0000;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            transition: background-color 0.3s, transform 0.2s;
        }

        .play-button:hover {
            background-color: #cc0000;
            transform: scale(1.05);
        }

        .volume-slider {
            margin-top: 10px;
            width: 200px;
            display: none;
        }

        #modal-video {
            display: none; /* Ocultarlo por defecto */
            max-width: 100%; /* Limitar el ancho al tama√±o del modal */
            max-height: 200px; /* Limitar la altura m√°xima */
            border-radius: 8px; /* Bordes redondeados */
            margin: 10px auto; /* Centrarse dentro del modal */
        }

        #modal-content {
            text-align: center;
            margin: 10px auto;
        }

        #modal-video {
            max-width: 100%;
            max-height: 200px; /* Limita la altura del contenido */
            margin-top: 10px;
            border-radius: 8px;
            object-fit: contain; /* Asegura que la imagen se ajuste dentro del modal */
            text-align: center;
            display: block;
        }

        #modal-image {
            display: block; /* Asegura que sea un elemento de bloque */
            margin: 0 auto; /* Centra horizontalmente */
            max-width: 100%; /* Ajusta el ancho al tama√±o del modal */
            max-height: 80vh; /* Limita la altura para evitar desbordamiento */
            object-fit: contain; /* Asegura que la imagen no se deforme */
        }

    </style>
</head>
<body>
    <h1>Calendario de Adviento</h1>

    <div class="container" id="calendar"></div>

    <div class="audio-controls" id="audio-controls">
        <button class="play-button" id="play-button">üéµ Reproducir M√∫sica</button>
        <input type="range" id="volume-slider" class="volume-slider" min="0" max="1" step="0.01" value="0.5">
    </div>

    <div class="overlay" id="overlay"></div>

    <div class="modal" id="modal">
        <h2 id="modal-title"></h2>
        <p id="modal-message"></p>
        <div id="modal-content">
            <img id="modal-image" src="" alt="Imagen del d√≠a" style="display: none;">
            <video id="modal-video" controls style="display: none;">
                <source src="" type="video/mp4">
                Tu navegador no soporta la reproducci√≥n de videos.
            </video>
        </div>
        <button class="close-btn" id="close-btn">Cerrar</button>
    </div>

    <video id="modal-video" controls style="display: none; width: 100%; height: auto;">
        <source src="" type="video/mp4">
        Tu navegador no soporta la reproducci√≥n de videos.
    </video>

    <script>
                const days = [
            {
                day: 1,
                question: "¬øCuantas navidades hemos pasado juncos?",
                answer: "4",
                message: "Correcto! y ya veras las que quedan por venir!",
                //image: "https://via.placeholder.com/300x200?text=D√≠a+1"
                image: "images/nosocos/1.png",
                width: "250px", // Ancho de la imagen
                height: "400px",  // Altura, ajustada autom√°ticamente
            },
            {
                day: 2,
                question: "¬øC√≥mo se llama el famoso reno de Santa Claus?",
                answer: "Rudolph",
                message: "¬°Correcto! El reno se llama Rudolph.",
                image: "https://via.placeholder.com/300x200?text=D√≠a+2"
            },
            {
                day: 3,
                question: "Por espa√±a, las mujeres, y el vino...",
                answer: "a tomar por culo el chino",
                message: "Vaya cuenco eres chio!, coge una chocolatina mi ambo ‚ù§Ô∏è",
                //image: "https://via.placeholder.com/300x200?text=D√≠a+3"
                image: "images/nosocos/3.png",
                width: "300px", // Ancho de la imagen
                height: "auto",  // Altura, ajustada autom√°ticamente
            },
            {
                day: 4,
                question: "¬øQue dia es hoy?",
                answer: "Aniversario",
                message: "Felices 3 a√±os, y 2 meses mi juncacea! Te ambo muxo!",
                video: "images/nosocos/4.mp4",
                width: "400px", // Ancho de la imagen
                height: "400px",  // Altura, ajustada autom√°ticamente
            },
            {
                day: 5,
                question: "¬øQu√© planta se utiliza para decorar en Navidad y suele colgarse del techo?",
                answer: "Mu√©rdago",
                message: "¬°Correcto! El mu√©rdago es una planta com√∫n en Navidad.",
                image: "https://via.placeholder.com/300x200?text=D√≠a+5"
            },
            {
                day: 6,
                question: "¬øEn qu√© pa√≠s se origin√≥ la tradici√≥n del √°rbol de Navidad?",
                answer: "Alemania",
                message: "¬°Correcto! La tradici√≥n del √°rbol de Navidad se origin√≥ en Alemania.",
                image: "https://via.placeholder.com/300x200?text=D√≠a+6"
            },
            {
                day: 7,
                question: "¬øCu√°l es el nombre del famoso ballet de Tchaikovsky asociado con la Navidad?",
                answer: "El Cascanueces",
                message: "¬°Correcto! El ballet es 'El Cascanueces'.",
                image: "https://via.placeholder.com/300x200?text=D√≠a+7"
            },
            {
                day: 8,
                question: "¬øQu√© dulce tradicional se cuelga en los √°rboles de Navidad?",
                answer: "Bolas de Navidad",
                message: "¬°Correcto! Se cuelgan bolas de Navidad.",
                image: "https://via.placeholder.com/300x200?text=D√≠a+8"
            },
            {
                day: 9,
                question: "¬øQu√© s√≠mbolo tradicional se coloca en la cima del √°rbol de Navidad?",
                answer: "Estrella",
                message: "¬°Correcto! Se coloca una estrella en la cima.",
                image: "https://via.placeholder.com/300x200?text=D√≠a+9"
            },
            {
                day: 10,
                question: "¬øCu√°l es el villancico m√°s popular en muchos pa√≠ses de habla hispana?",
                answer: "Noche de Paz",
                message: "¬°Correcto! 'Noche de Paz' es muy popular.",
                image: "https://via.placeholder.com/300x200?text=D√≠a+10"
            },
            {
                day: 11,
                question: "¬øQu√© personaje regala juguetes a los ni√±os en Navidad?",
                answer: "Pap√° Noel",
                message: "¬°Correcto! Pap√° Noel regala juguetes.",
                image: "https://via.placeholder.com/300x200?text=D√≠a+11"
            },
            {
                day: 12,
                question: "¬øQu√© planta se utiliza para hacer coronas navide√±as?",
                answer: "Acebo",
                message: "¬°Correcto! Se utiliza el acebo para coronas.",
                image: "https://via.placeholder.com/300x200?text=D√≠a+12"
            },
            {
                day: 13,
                question: "¬øCu√°l es el plato t√≠pico que se come en muchos hogares durante la cena de Navidad?",
                answer: "Pavo",
                message: "¬°Correcto! El pavo es un plato t√≠pico.",
                image: "https://via.placeholder.com/300x200?text=D√≠a+13"
            },
            {
                day: 14,
                question: "¬øQu√© figura tradicional viene acompa√±ado de duendes y juguetes en su taller?",
                answer: "Pap√° Noel",
                message: "¬°Correcto! Pap√° Noel tiene duendes y juguetes en su taller.",
                image: "https://via.placeholder.com/300x200?text=D√≠a+14"
            },
            {
                day: 15,
                question: "¬øC√≥mo se llama el d√≠a despu√©s de Navidad?",
                answer: "Boxing Day",
                message: "¬°Correcto! Se llama Boxing Day.",
                image: "https://via.placeholder.com/300x200?text=D√≠a+15"
            },
            {
                day: 16,
                question: "¬øQu√© bebida espumosa se suele brindar durante las celebraciones navide√±as?",
                answer: "Champ√°n",
                message: "¬°Correcto! Se brinda con champ√°n.",
                image: "https://via.placeholder.com/300x200?text=D√≠a+16"
            },
            {
                day: 17,
                question: "¬øCu√°l es el pastel tradicional que se come en Alemania durante Navidad?",
                answer: "Stollen",
                message: "¬°Correcto! El pastel se llama Stollen.",
                image: "https://via.placeholder.com/300x200?text=D√≠a+17"
            },
            {
                day: 18,
                question: "¬øQu√© animal suele tirarse al trineo de Pap√° Noel?",
                answer: "Renos",
                message: "¬°Correcto! Los renos tiran el trineo.",
                image: "https://via.placeholder.com/300x200?text=D√≠a+18"
            },
            {
                day: 19,
                question: "¬øQu√© pa√≠s es conocido por la tradici√≥n del bel√©n navide√±o?",
                answer: "Espa√±a",
                message: "¬°Correcto! En Espa√±a es muy conocido.",
                image: "https://via.placeholder.com/300x200?text=D√≠a+19"
            },
            {
                day: 20,
                question: "¬øC√≥mo se llama el festival hind√∫ que tambi√©n se celebra en diciembre?",
                answer: "Diwali",
                message: "¬°Correcto! El festival se llama Diwali.",
                image: "https://via.placeholder.com/300x200?text=D√≠a+20"
            },
            {
                day: 21,
                question: "¬øQu√© flor roja es s√≠mbolo de la Navidad?",
                answer: "Poinsettia",
                message: "¬°Correcto! La poinsettia es una flor roja de Navidad.",
                image: "https://via.placeholder.com/300x200?text=D√≠a+21"
            },
            {
                day: 22,
                question: "¬øQu√© figura mitol√≥gica trae regalos a los ni√±os durante la Navidad en algunas culturas europeas?",
                answer: "Krampus",
                message: "¬°Correcto! Krampus trae regalos en algunas culturas.",
                image: "https://via.placeholder.com/300x200?text=D√≠a+22"
            },
            {
                day: 23,
                question: "¬øQu√© dulce t√≠pico se cuelga y se come en Navidad en muchos pa√≠ses?",
                answer: "Polvorones",
                message: "¬°Correcto! Los polvorones son dulces t√≠picos.",
                image: "https://via.placeholder.com/300x200?text=D√≠a+23"
            },
            {
                day: 24,
                question: "¬øQu√© celebraci√≥n marca el final del Adviento en la noche del 24 de diciembre?",
                answer: "Nochebuena",
                message: "¬°Correcto! La noche del 24 es Nochebuena.",
                image: "https://via.placeholder.com/300x200?text=D√≠a+24"
            },
            {
                day: 25,
                question: "¬øCu√°l es el verdadero significado de la Navidad?",
                answer: "amor",
                message: "¬°Correcto! La Navidad es una √©poca de amor.",
                image: "https://via.placeholder.com/300x200?text=D√≠a+25"
            },
            {
                day: 26,
                question: "¬øQu√© d√≠a se celebra el Boxing Day en muchos pa√≠ses de la Commonwealth?",
                answer: "26 de diciembre",
                message: "¬°Correcto! El Boxing Day se celebra el 26 de diciembre.",
                image: "https://via.placeholder.com/300x200?text=D√≠a+26"
            },
            {
                day: 27,
                question: "¬øCu√°l es el d√≠a que sigue al Boxing Day?",
                answer: "27 de diciembre",
                message: "¬°Correcto! El d√≠a siguiente es el 27 de diciembre.",
                image: "https://via.placeholder.com/300x200?text=D√≠a+27"
            },
            {
                day: 28,
                question: "¬øQu√© celebraci√≥n religiosa se conmemora el 28 de diciembre en M√©xico?",
                answer: "D√≠a de los Santos Inocentes",
                message: "¬°Correcto! Se celebra el D√≠a de los Santos Inocentes.",
                image: "https://via.placeholder.com/300x200?text=D√≠a+28"
            },
            {
                day: 29,
                question: "¬øC√≥mo se llama el d√≠a de San Esteban, celebrado el 26 de diciembre?",
                answer: "D√≠a de San Esteban",
                message: "¬°Correcto! Se llama D√≠a de San Esteban.",
                image: "https://via.placeholder.com/300x200?text=D√≠a+29"
            },
            {
                day: 30,
                question: "¬øQu√© festividad se celebra el 31 de diciembre?",
                answer: "A√±o Nuevo",
                message: "¬°Correcto! Se celebra el A√±o Nuevo.",
                image: "https://via.placeholder.com/300x200?text=D√≠a+30"
            },
            {
                day: 31,
                question: "¬øCu√°l es el momento justo para brindar por el A√±o Nuevo?",
                answer: "Medianoche",
                message: "¬°Correcto! Se brinda a medianoche.",
                image: "https://via.placeholder.com/300x200?text=D√≠a+31"
            }
        ];

        const today = new Date();
        const currentDay = today.getDate();
        const calendar = document.getElementById("calendar");

        days.forEach(dayInfo => {
            const dayElement = document.createElement("div");
            dayElement.className = "day";

            const img = document.createElement("img");

            // Set the image source
            if (dayInfo.day <= 24) {
                img.src = `images/numbers/${dayInfo.day}.png`;
            } else {
                img.src = "images/numbers/24.png"; // Default image for locked days
            }

            img.alt = `D√≠a ${dayInfo.day}`;
            img.style.width = "100%";
            img.style.height = "auto";
            
            if (dayInfo.day < currentDay) {
                dayElement.classList.add("unlocked");
                dayElement.addEventListener("click", () => openModal(dayInfo));
            } else if (dayInfo.day === currentDay) {
                dayElement.classList.add("today");
                dayElement.addEventListener("click", () => openModal(dayInfo));
            } else {
                dayElement.classList.add("locked");
            }

            dayElement.appendChild(img);
            calendar.appendChild(dayElement);
        });

        const modal = document.getElementById("modal");
        const overlay = document.getElementById("overlay");
        const modalTitle = document.getElementById("modal-title");
        const modalMessage = document.getElementById("modal-message");
        const modalImage = document.getElementById("modal-image");
        const closeModal = document.getElementById("close-btn");

        function openModal(dayInfo) {
            const userAnswer = prompt(dayInfo.question);

            if (userAnswer && userAnswer.toLowerCase() === dayInfo.answer.toLowerCase()) {
                modalTitle.textContent = `D√≠a ${dayInfo.day}`;
                modalMessage.textContent = dayInfo.message;

                // Selecci√≥n de elementos de imagen y video
                const modalVideo = document.getElementById("modal-video");
                const videoSource = modalVideo.querySelector("source");

                // L√≥gica para mostrar imagen o video
                if (dayInfo.image) {
                    modalImage.src = dayInfo.image; // Asigna la fuente de la imagen
                    modalImage.style.display = "block"; // Muestra la imagen

                    // Configuraci√≥n para centrar y ajustar tama√±o
                    modalImage.style.maxWidth = dayInfo.width || "100%"; // Si est√° definido, usa `width`
                    modalImage.style.maxHeight = dayInfo.height || "80vh"; // Si est√° definido, usa `height`

                    // Aseg√∫rate de que el video est√© oculto
                    modalVideo.style.display = "none";
                    videoSource.src = "";
                } else if (dayInfo.video) {
                    console.log("Mostrando video:", dayInfo.video); // Debugging
                    videoSource.src = dayInfo.video; // Establecer la fuente del video

                    modalVideo.style.display = "block"; // Mostrar el video
                    modalVideo.style.width = dayInfo.width || "300px"; // Usar el ancho definido o predeterminado
                    modalVideo.style.height = dayInfo.height || "auto"; // Usar la altura definida o auto por defecto
                    modalVideo.style.margin = "0 auto"; // Centrar el video dentro del modal

                    modalVideo.load(); // Recargar el video para asegurar la reproducci√≥n
                    modalImage.style.display = "none"; // Ocultar la imagen
                } else {
                    // Si no hay imagen ni video, ocultar ambos
                    modalImage.style.display = "none";
                    modalVideo.style.display = "none";
                }

                // Mostrar el modal
                modal.style.display = "block";
                overlay.style.display = "block";
            } else {
                alert("Respuesta incorrecta. Int√©ntalo de nuevo.");
            }
        }

        closeModal.addEventListener("click", () => {
            modal.style.display = "none";
            overlay.style.display = "none";
        });

        overlay.addEventListener("click", () => {
            modal.style.display = "none";
            overlay.style.display = "none";
        });

        // Snowflake Animation
        function createSnowflakes() {
            const snowflake = document.createElement("div");
            snowflake.className = "snowflake";
            snowflake.style.left = Math.random() * window.innerWidth + "px";
            snowflake.style.animationDuration = 5 + Math.random() * 5 + "s";
            snowflake.style.opacity = Math.random();
            document.body.appendChild(snowflake);

            snowflake.addEventListener("animationend", () => {
                snowflake.remove();
            });
        }
            
        // Audio logic
        const audio = new Audio('https://www.bensound.com/bensound-music/bensound-memories.mp3');
        audio.loop = true; // Enable looping
        audio.volume = 0.5; // Default volume
        audio.muted = false; // Start muted
        audio.play(); // Attempt to autoplay (muted autoplay is allowed in modern browsers)

        const playButton = document.getElementById('play-button');
        const volumeSlider = document.getElementById('volume-slider');

        // Handle play/pause and unmute
        playButton.addEventListener('click', () => {
            if (audio.muted) {
                audio.muted = false; // Unmute the audio
                playButton.textContent = '‚è∏Ô∏è Pausar M√∫sica'; // Update button text
                volumeSlider.style.display = 'block'; // Show the volume slider
            } else if (audio.paused) {
                audio.play(); // Resume playback
                playButton.textContent = '‚è∏Ô∏è Pausar M√∫sica'; // Update button text
                volumeSlider.style.display = 'block'; // Show the volume slider
            } else {
                audio.pause(); // Pause the audio
                playButton.textContent = '‚ñ∂Ô∏è Reproducir M√∫sica'; // Update button text
                volumeSlider.style.display = 'block'; // Ensure the slider is visible
            }
        });

        // Handle volume adjustment
        volumeSlider.addEventListener('input', (e) => {
            audio.volume = e.target.value;
        });

        setInterval(createSnowflakes, 200);
    </script>
</body>
</html>
